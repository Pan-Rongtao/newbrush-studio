<Controls:MetroWindow x:Class="studio.MainWindow"
                      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:Controls="http://metro.mahapps.com/winfx/xaml/controls"
                      xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
                      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
                      xmlns:studio="clr-namespace:studio"
                      Title="newbrush studio"
                      MinWidth="200"
                      MinHeight="200"
                      Width="1440"
                      Height="720"
                      WindowStartupLocation="CenterScreen" 
                      GlowBrush="{DynamicResource AccentColorBrush}"
    >

    <Window.Resources>
        <DataTemplate x:Key="listUniformTemplate" DataType="{x:Type studio:UniformItem}">
            <Grid VerticalAlignment="Center" HorizontalAlignment="Center" Margin="4" ShowGridLines="True">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Width="100" HorizontalAlignment="Center" VerticalAlignment="Center" Text="{Binding Uniform}"/>
                <TextBlock Grid.Column="1" Width="100" HorizontalAlignment="Center" VerticalAlignment="Center" Text="{Binding Type}"/>
                <TextBox Grid.Column="2" Width="100" HorizontalAlignment="Center" VerticalAlignment="Center" Text="{Binding Value}"/>
            </Grid>
        </DataTemplate>
    </Window.Resources>

    <Controls:MetroWindow.RightWindowCommands>
        <Controls:WindowCommands>
            <Button Content="settings" />
            <Button>
                <StackPanel Orientation="Horizontal">
                    <iconPacks:PackIconModern Width="24" Height="24" Kind="FoodCupcake" />
                    <TextBlock Margin="4 0 0 0" VerticalAlignment="Center" Text="deploy cupcakes" />
                </StackPanel>
            </Button>
        </Controls:WindowCommands>
    </Controls:MetroWindow.RightWindowCommands>

    <Grid x:Name="grid">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" MinWidth="350"/>
            <ColumnDefinition Width="3" />
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="3" />
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <TabControl Margin="10">
            <TabItem Header="vshader" Foreground="Red" >
                <TextBox x:Name="vshader_code" VerticalScrollBarVisibility="Visible" FontSize="20" 
                         Text="attribute vec4 nbPos;&#13;uniform mat4 nbMvp;&#13;&#13;void main()&#13;{&#13;    gl_Position = nbMvp * nbPos;&#13;}"
                         />
            </TabItem>
            <TabItem Header="fshader" Foreground="DarkBlue" >
                <TextBox x:Name="fshader_code" VerticalScrollBarVisibility="Visible" FontSize="20" TextWrapping="Wrap" AcceptsReturn="True"
                         Text="precision mediump float;&#13;
uniform float time;&#13;
uniform vec2  resolution;&#13;
uniform vec2  mouse;&#13;

void main(void){&#13;
	&#13;
	float t = time;&#13;
	vec2 r = resolution;&#13;
	&#13;
    vec2 p = (gl_FragCoord.xy * 2.0 - r) / min(r.x, r.y);&#13;
	vec3 destColor = vec3(mouse.x, mouse.y, 0.7);&#13;
	float f = 0.0;&#13;
    for(float i = 0.0; i &lt; 20.0; i++)&#13;
	{&#13;
		float s = sin(t + i * 0.314) * 0.5;&#13;
		float c = cos(t + i * 0.314) * 0.5;&#13;
		f += 0.002 / abs(length(p + vec2(s, c)) - 1.5*abs(sin(0.3 * t)));&#13;
    }&#13;
    gl_FragColor = vec4(vec3(destColor * f), 1.0);&#13;

};"
                         />
            </TabItem>
        </TabControl>
        <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch" />
        <GridSplitter Grid.Column="3" Width="5" HorizontalAlignment="Stretch" />

        <ListBox Grid.Column="2" Margin="10" x:Name="uniformList" ItemTemplate="{StaticResource listUniformTemplate}">
            
        </ListBox>

        <StackPanel Grid.Column="4">
            <Button Margin="50" Foreground="Blue" FontSize="40" Click="Button_Click">
                启动渲染窗口
            </Button>
            <Button x:Name="btn_buildShader" Margin="50" Foreground="Blue" FontSize="40" Click="btn_buildShader_Click">
                更新着色器
            </Button>
        </StackPanel>
    </Grid>
</Controls:MetroWindow>